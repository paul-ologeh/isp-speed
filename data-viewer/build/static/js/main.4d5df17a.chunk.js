(this["webpackJsonpdata-viewer"]=this["webpackJsonpdata-viewer"]||[]).push([[0],{237:function(e,t,a){},327:function(e,t,a){},463:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(0),o=a.n(r),i=a(54),s=a.n(i),c=(a(327),a(328),a(130)),d=a.n(c),l=a(304),h=a(281),u=a(73),j=a(74),p=a(75),m=a(84),b=a(489),x=a(490),v=a(480),O=a(303),g=a(136),f=a(483),D=a(492),y=a(479),w=a(495),S=a(486),C=a(484),T=a(493);a(237);function F(e){var t={};for(var a in e)e[a].Provider in t||(t[e[a].Provider]={Provider:e[a].Provider,Upload:0,Download:0,Count:0}),t[e[a].Provider].Upload+=e[a].Upload,t[e[a].Provider].Download+=e[a].Download,t[e[a].Provider].Count+=1;var n=[],r=["WorldStream","Total","Performive",null];for(var o in t)r.includes(t[o].Provider)||(t[o].Upload/=t[o].Count,t[o].Upload=t[o].Upload.toFixed(2),t[o].Download/=t[o].Count,t[o].Download=t[o].Download.toFixed(2),n.push(t[o]));return n}function P(e){var t=new Date,a=JSON.parse(JSON.stringify(e.slice(Math.max(e.length-4,0))));for(var n in a.reverse(),a){var r=t.getTime()-new Date(a[n].RecordTime).getTime();r=(r/=36e5)<=1.5?"Less than 1 hour ago":r>24?"More than a day ago":"About ".concat(r.toFixed(0)," hours ago"),a[n].date=r,a[n].meta=a[n].Host,a[n].summary="Download: ".concat(a[n].Download," Mbps   Upload: ").concat(a[n].Upload," Mbps"),"EE"===a[n].Provider?a[n].image="/ISP-Speed/EE.jpg":"Three"===a[n].Provider&&(a[n].image="/ISP-Speed/Three.png"),delete a[n].RecordTime,delete a[n].Provider,delete a[n].Download,delete a[n].Upload}return a}function k(e,t){var a=0;return e.Count>t.Count?a=1:e.Count<t.Count&&(a=-1),a}function U(e){var t={};for(var a in e){var n=e[a].Host;if(!(null in e[a])&&null!==n){var r=n.indexOf("[");(n=n.slice(0,r))in t||(t[n]={Host:n,Count:0}),t[n].Count+=1}}var o=[];for(var i in t)o.push(t[i]);o.sort(k);var s=o.length;return o.slice(s-4,s)}function A(e,t,a){for(var n=new Date,r=0,o=0;o<e.length;o++){if(a){var i=new Date(e[o].RecordTime);if(i.getDate()===n.getDate()&&i.getMonth()===n.getMonth()&&i.getFullYear()===n.getFullYear())continue}r+=e[o][t]}return(r/=e.length).toFixed(1)}function M(e,t){var a=0,n=new Date;t&&n.setDate(n.getDate()-1);for(var r=e.length-1;r>=0;r--){var o=new Date(e[r].RecordTime);o.getDate()===n.getDate()&&o.getMonth()===n.getMonth()&&o.getFullYear()===n.getFullYear()&&a++}return a}function R(e,t){var a=[],n=new Date;for(var r in e){var o=new Date(e[r].RecordTime);if("30 days"===t)(n.getTime()-o.getTime())/864e5<=30&&a.push(e[r]);else if("7 days"===t){(n.getTime()-o.getTime())/864e5<=7&&a.push(e[r])}else if("24 hours"===t){(n.getTime()-o.getTime())/36e5<=24&&a.push(e[r])}}return a}function I(e){if(void 0===e)return null;for(var t=[],a=0;a<e.length;a++){var n=new Date(e[a].RecordTime),r=n.getFullYear(),o=n.getMonth()+1;if(!isNaN(r)&&!isNaN(o)){var i="".concat(r).concat(o);i in t||(t[i]=[]),t[i].push(e[a])}}var s=[];for(var c in t){var d={Download:0,Upload:0,Provider:null,RecordTime:null};for(var l in d.RecordTime=t[c][0].RecordTime,d.Provider=t[c][0].Provider,t[c])d.Download+=t[c][l].Download,d.Upload+=t[c][l].Upload;d.Download/=t[c].length,d.Upload/=t[c].length,d.Download=d.Download.toFixed(1),d.Upload=d.Upload.toFixed(1),s.push(d)}return s.sort(N),s}function N(e,t){var a=0;return e.RecordTime>t.RecordTime?a=1:e.RecordTime<t.RecordTime&&(a=-1),a}var Y=a(485),B=a(474),H=a(478),K=a(169),E=a(170),G=a(38),_=a(203),L=a(149),z=a(168),J=a(225),W=a.n(J),q=function(e){var t=e.active,a=e.payload,r=(e.label,e.timeDuration);if(t&&void 0!==a&&null!==a){var o=a[0].payload.RecordTime,i=new Date(o).toLocaleString();return Object(n.jsxs)("div",{className:"custom-tooltip",children:["All Time"===r?null:Object(n.jsxs)("p",{className:"desc",children:["Timestamp: ",i," "]}),"All Time"===r?null:Object(n.jsxs)("p",{className:"desc",children:["Provider: ",a[0].payload.Provider]}),Object(n.jsxs)("p",{className:"desc",children:["Download Speed: ",a[0].payload.Download," Mbps"]}),Object(n.jsxs)("p",{className:"desc",children:["Upload Speed: ",a[0].payload.Upload," Mbps"]})]})}return null},Q=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_max:0},e}return Object(j.a)(a,[{key:"calculateDomain",value:function(){var e=0;for(var t in this.props.data)e=parseFloat(this.props.data[t].Download)>e?parseFloat(this.props.data[t].Download):e,e=parseFloat(this.props.data[t].Upload)>e?parseFloat(this.props.data[t].Upload):e;e=parseInt(10*Math.ceil((e+10)/10)),this.setState({_max:e})}},{key:"componentDidMount",value:function(){this.calculateDomain()}},{key:"componentDidUpdate",value:function(e,t){e!==this.props.data&&this.calculateDomain()}},{key:"render",value:function(){return Object(n.jsx)(Y.a,{width:"100%",height:200,children:Object(n.jsxs)(B.a,{data:this.props.data,margin:{top:5,right:20,left:20,bottom:5},children:[Object(n.jsx)(H.a,{}),Object(n.jsx)(K.a,{dataKey:"RecordTime",name:"Time",domain:["auto","auto"],tickFormatter:"All Time"===this.props.timeDuration?function(e){return W()(e).format("MMM YY")}:function(e){return W()(e).format("HH:mm Do")}}),Object(n.jsx)(E.a,{domain:[0,this.state._max],children:Object(n.jsx)(G.a,{value:"Speed (Mbps)",position:"left",angle:-90,style:{textAnchor:"middle"}})}),Object(n.jsx)(_.a,{content:Object(n.jsx)(q,{timeDuration:this.props.timeDuration})}),Object(n.jsx)(L.a,{}),Object(n.jsx)(z.a,{type:"monotone",dataKey:"Download",stroke:"#8884d8",activeDot:{r:8}}),Object(n.jsx)(z.a,{type:"monotone",dataKey:"Upload",stroke:"#82ca9d"})]})})}}]),a}(r.PureComponent),V=a(487),X=a(294),Z=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_max:0},e}return Object(j.a)(a,[{key:"calculateDomain",value:function(){var e=0;for(var t in this.props.data)e=parseFloat(this.props.data[t].Download)>e?parseFloat(this.props.data[t].Download):e,e=parseFloat(this.props.data[t].Upload)>e?parseFloat(this.props.data[t].Upload):e;e=parseInt(e+1),this.setState({_max:e})}},{key:"componentDidMount",value:function(){this.calculateDomain()}},{key:"componentDidUpdate",value:function(e,t){t!==this.props.state&&this.calculateDomain()}},{key:"render",value:function(){return Object(n.jsx)(Y.a,{width:"100%",height:300,children:Object(n.jsxs)(V.a,{layout:"vertical",data:this.props.data,margin:{top:20,right:20,bottom:20,left:20},children:[Object(n.jsx)(K.a,{type:"number",domain:[0,this.state._max]}),Object(n.jsx)(E.a,{dataKey:"Provider",type:"category",padding:{bottom:15}}),Object(n.jsx)(_.a,{}),Object(n.jsx)(L.a,{}),Object(n.jsx)(X.a,{dataKey:"Download",barSize:10,fill:"#413ea0"}),Object(n.jsx)(X.a,{dataKey:"Upload",barSize:10,fill:"#ff7300"})]})})}}]),a}(r.PureComponent),$=a(488),ee=a(295),te=a(113),ae=["#0088FE","#00C49F","#FFBB28","#FF8042"],ne=Math.PI/180,re=function(e){var t=e.cx,a=e.cy,r=e.midAngle,o=e.innerRadius,i=e.outerRadius,s=e.percent,c=(e.index,e.entry,o+.5*(i-o)),d=t+c*Math.cos(-r*ne),l=a+c*Math.sin(-r*ne);return Object(n.jsx)("text",{x:d,y:l,fill:"white",textAnchor:d>t?"start":"end",dominantBaseline:"central",children:"".concat((100*s).toFixed(0),"%")})},oe=function(e){var t=e.active,a=e.payload;e.label;return t&&void 0!==a?Object(n.jsxs)("div",{className:"custom-tooltip",children:[Object(n.jsxs)("p",{className:"desc",children:["Provider: ",a[0].payload.Host," "]}),Object(n.jsxs)("p",{className:"desc",children:["# of Times Used: ",a[0].payload.Count]})]}):null},ie=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return Object(n.jsx)(Y.a,{width:"100%",height:300,children:Object(n.jsxs)($.a,{children:[Object(n.jsx)(ee.a,{data:this.props.data,labelLine:!1,label:re,fill:"#8884d8",dataKey:"Count",children:this.props.data.map((function(e,t){return Object(n.jsx)(te.a,{entry:e,fill:ae[t%ae.length]},"cell-".concat(t))}))}),Object(n.jsx)(L.a,{formatter:function(e,t,a){return t.payload.payload.payload.Host.replace("(","")}}),Object(n.jsx)(_.a,{content:Object(n.jsx)(oe,{})})]})})}}]),a}(r.PureComponent),se=a(481),ce=function(e){return Object(n.jsx)(Y.a,{centered:!0,width:"100%",height:300,children:Object(n.jsx)(se.a,{events:e.data})})},de={height:"100vh",minHeight:"100vh"},le=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={allData:[],dataNorm:[],data:[],providerData:[],open:!1,hostData:[],recents:[],showSideBar:!0,timeDuration:"All Time",summary:[{meta:"Change Since Yesterday: 0 %",header:"Average Download Speed",description:"0 Mbps"},{meta:"Change Since Yesterday: 0 %",header:"Average Upload Speed",description:"0 Mbps"},{meta:"Change Since Yesterday: 0 %",header:"Number of Tests Today",description:"0"},{meta:"Change Since Yesterday: 0 %",header:"Total Number of Tests",description:"0"}]},e.toggleSideBar=function(){return e.setState((function(e){return{showSideBar:!e.showSideBar}}))},e.handleChange=function(t,a){var n=a.timeDuration;return e.setState({timeDuration:n})},e}return Object(j.a)(a,[{key:"callAPI",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,a,n,r,o,i,s,c,h,u,j,p,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3600/api/data");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.debug("API returned"),console.debug(a.recordset),this.setState({allData:a.recordset}),n=Object(l.a)(this.state.summary),r=A(a.recordset,"Download",!1),o=A(a.recordset,"Download",!0),i=(r-o)/o*100,s=A(a.recordset,"Upload",!1),c=A(a.recordset,"Upload",!0),h=c?(s-c)/c*100:0,u=M(a.recordset,!1),j=M(a.recordset,!0),p=j?(u-j)/j*100:0,m=a.recordset.length?(a.recordset.length-u)/a.recordset.length:0,n[0].description=r+" Mbps",n[0].meta="Change Since Yesterday: "+i.toFixed(1)+" %",n[1].description=s+" Mbps",n[1].meta="Change Since Yesterday: "+h.toFixed(1)+" %",n[2].description=u,n[2].meta="Change Since Yesterday: "+p.toFixed(1)+" %",n[3].description=a.recordset.length,n[3].meta="Change Since Yesterday: "+m.toFixed(1)+" %",this.setState({summary:n}),this.setState({allData:a.recordset}),this.setState({data:I(a.recordset)}),this.setState({providerData:F(a.recordset)}),this.setState({hostData:U(a.recordset)}),this.setState({recents:P(a.recordset)});case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){console.clear(),this.callAPI()}},{key:"componentDidUpdate",value:function(e,t){t.timeDuration!==this.state.timeDuration&&("All Time"===this.state.timeDuration?this.setState({data:I(this.state.allData)}):this.setState({data:R(this.state.allData,this.state.timeDuration)}))}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{style:de,children:Object(n.jsxs)(b.a,{padded:!0,columns:1,style:{height:"100%"},children:[Object(n.jsxs)(x.a,{as:v.a,animation:"push",icon:"labeled",inverted:!0,vertical:!0,visible:this.state.showSideBar,onHide:function(){return e.setState({showSideBar:!1})},width:"thin",children:[Object(n.jsxs)(v.a.Item,{as:"image",children:[Object(n.jsx)(O.a,{size:"small",circular:!0,src:"/ISP-Speed/profile.jpg"}),Object(n.jsx)("br",{}),Object(n.jsx)(v.a.Header,{children:"Welcome Paul!"})]}),Object(n.jsxs)(v.a.Item,{as:"a",onClick:function(){window.location="/"},children:[Object(n.jsx)(g.a,{name:"home"}),"Home"]}),Object(n.jsxs)(f.a,{closeIcon:!0,open:this.state.open,trigger:Object(n.jsxs)(v.a.Item,{as:"a",children:[Object(n.jsx)(g.a,{name:"edit outline"}),"Customize"]}),onClose:function(){return e.setState({open:!1})},onOpen:function(){return e.setState({open:!0})},children:[Object(n.jsx)(D.a,{icon:"edit",content:"Customise Data"}),Object(n.jsx)(f.a.Content,{children:Object(n.jsx)(y.a,{children:Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(D.a,{children:"Speed Chart Time Filters"}),Object(n.jsx)(y.a.Field,{children:Object(n.jsx)(w.a,{radio:!0,label:"24 hours",name:"checkboxRadioGroup",timeDuration:"24 hours",checked:"24 hours"===this.state.timeDuration,onChange:this.handleChange})}),Object(n.jsx)(y.a.Field,{children:Object(n.jsx)(w.a,{radio:!0,label:"7 days",name:"checkboxRadioGroup",timeDuration:"7 days",checked:"7 days"===this.state.timeDuration,onChange:this.handleChange})}),Object(n.jsx)(y.a.Field,{children:Object(n.jsx)(w.a,{radio:!0,label:"30 days",name:"checkboxRadioGroup",timeDuration:"30 days",checked:"30 days"===this.state.timeDuration,onChange:this.handleChange})}),Object(n.jsx)(y.a.Field,{children:Object(n.jsx)(w.a,{radio:!0,label:"All Time",name:"checkboxRadioGroup",timeDuration:"All Time",checked:"All Time"===this.state.timeDuration,onChange:this.handleChange})})]})})})]}),Object(n.jsxs)(v.a.Item,{as:"a",children:[Object(n.jsx)(g.a,{name:"info"}),"About"]}),Object(n.jsxs)(v.a.Item,{as:"a",href:"https://github.com/paulologeh/ISP-Speed",children:[Object(n.jsx)(g.a,{name:"github"}),"Source Code"]})]}),Object(n.jsxs)(b.a.Column,{style:{backgroundColor:"#F0F0F0"},children:[Object(n.jsx)(b.a.Row,{children:Object(n.jsx)(S.a,{color:"black",icon:!0,onClick:function(){return e.setState({showSideBar:!0})},children:Object(n.jsx)(g.a,{name:"bars"})})}),Object(n.jsx)(b.a.Row,{centered:!0,children:Object(n.jsx)(C.a.Group,{centered:!0,items:this.state.summary})}),Object(n.jsxs)(b.a.Row,{children:[Object(n.jsx)("br",{}),Object(n.jsxs)(T.a,{children:[Object(n.jsx)(D.a,{as:"h3",textAlign:"center",children:"Speed Chart"}),Object(n.jsx)(Q,{timeDuration:this.state.timeDuration,data:this.state.data})]})]}),Object(n.jsxs)(b.a.Row,{children:[Object(n.jsx)("br",{}),Object(n.jsxs)(b.a,{columns:"equal",children:[Object(n.jsx)(b.a.Column,{children:Object(n.jsxs)(T.a,{children:[Object(n.jsx)(D.a,{as:"h3",textAlign:"center",children:"Average Cummulative Speed By Provider"}),Object(n.jsx)(Z,{data:this.state.providerData})]})}),Object(n.jsx)(b.a.Column,{children:Object(n.jsxs)(T.a,{children:[Object(n.jsx)(D.a,{as:"h3",textAlign:"center",children:"Top 4 Used Hosts"}),Object(n.jsx)(ie,{data:this.state.hostData})]})}),Object(n.jsx)(b.a.Column,{children:Object(n.jsxs)(T.a,{children:[Object(n.jsx)(D.a,{as:"h3",textAlign:"center",children:"Recent Test Activity"}),Object(n.jsx)(ce,{data:this.state.recents})]})})]})]})]})]})})}}]),a}(r.Component),he=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,496)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),o(e),i(e)}))};s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(le,{})}),document.getElementById("root")),he()}},[[463,1,2]]]);
//# sourceMappingURL=main.4d5df17a.chunk.js.map